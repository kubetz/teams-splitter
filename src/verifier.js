const TEAMS = 29;
const STATIONS = 14;
const ROUNDS = 14;

let _ = require('lodash');

let stations = JSON.parse("[[[0,1],[2,3],[4,5],[6,7],[8,9],[12,14],[13,16],[10,11],[20,24],[26,28],[17,19,27],[15,18],[23,25],[21,22]],[[9,10,28],[0,4,27],[1,2],[3,5],[6,11],[7,8],[12,17],[13,14],[18,19],[20,25],[15,16],[21,23],[22,24],[26]],[[7,13],[8,10,25],[0,3,28],[1,4],[2,5],[6,9],[18,20],[16,17],[26],[19,21],[22,23],[24],[12,15],[11,14,27]],[[15,19],[12,18],[8,11],[0,2,23],[1,3],[4,10],[5,6,27],[21,24],[13],[16,22],[28],[17,25,26],[14,20],[7,9]],[[8,16],[9,11],[14,15],[17,22],[0,7],[1,5],[2,4],[3,6,25],[10,12],[18,23,27],[21,26],[20,28],[13,19],[24]],[[25,27],[14,17],[12,21],[13,24,28],[15,23],[0,11,22],[1,8],[2,9],[3,4],[5,7],[20],[16,19],[18,26],[6,10]],[[12,22],[13,26],[17,24],[11,18],[14,19],[21,28],[0,9,25],[1,15],[2,6],[3,8],[4,7],[5,10],[16,27],[20,23]],[[18,24],[15,28],[16,23],[14,25],[20,22,26],[13,27],[11,19],[0,5],[1,7],[2,10],[3,9],[4,6],[17,21],[8,12]],[[17,23],[19,22],[10,18],[12,26],[16,24],[15,20],[14,21],[27,28],[0,8],[1,6],[2,11,25],[3,7],[4,9],[5,13]],[[5,11],[6,20],[7,22],[9,19],[21,27],[17,18],[23,24],[26],[14,16,28],[0,13],[1,12],[2,8],[3,10],[4,15,25]],[[4,20],[5,21],[6,13],[8,15],[12,25,28],[19,23],[26],[18,22],[11,17],[14],[0,10,24],[1,9,27],[2,7],[3,16]],[[3,14],[7,24],[26,27],[10,21],[4,13],[16,25],[22,28],[19,20],[5,9,23],[15,17],[6,8],[0,12],[1,11],[2,18]],[[2,21],[23],[19,25],[16,20],[18],[3,24,26],[7,10],[4,8],[15,22,27],[9,12],[5,14],[11,13],[0,6],[1,17,28]],[[6,26],[1,16],[9,20],[27],[10,17],[2],[3,15],[7,12,23],[21,25],[4,11,24],[13,18],[14,22],[5,8,28],[0,19]]]");
let teams = JSON.parse("[[0,1,2,3,4,5,6,7,8,9,10,11,12,13],[0,13,1,2,3,4,5,6,7,8,9,10,11,12],[12,0,1,3,2,13,4,5,6,7,8,9,10,11],[11,0,2,1,3,12,13,4,5,6,7,8,9,10],[10,1,0,2,11,3,4,12,5,13,6,7,8,9],[9,10,0,1,2,4,3,7,11,5,12,6,13,8],[13,9,10,0,1,2,3,4,6,8,11,7,12,5],[2,11,9,0,4,1,12,13,7,5,6,8,10,3],[4,2,3,10,0,1,5,12,8,6,11,9,13,7],[1,4,13,9,0,2,6,5,11,12,7,10,8,3],[1,2,8,11,13,3,12,0,4,7,10,6,9,5],[9,4,3,6,1,5,7,0,10,13,8,12,11,2],[6,3,5,8,10,0,1,13,4,12,9,11,2,7],[2,6,10,5,11,7,0,1,3,9,13,12,4,8],[11,5,4,7,6,0,8,1,9,10,12,13,3,2],[3,7,4,10,5,8,13,6,12,11,1,0,2,9],[4,13,7,12,8,11,0,2,9,3,1,5,6,10],[8,5,6,4,13,9,1,2,10,11,0,3,7,12],[7,3,8,6,12,9,2,10,1,4,13,0,5,11],[3,8,12,9,6,10,7,11,1,2,0,5,4,13],[10,9,13,12,7,8,2,11,0,1,5,4,3,6],[12,10,5,11,9,6,8,3,13,2,4,1,7,0],[6,8,9,4,7,5,11,10,12,3,2,13,1,0],[8,12,7,3,5,10,9,13,11,4,2,1,0,6],[7,11,6,5,8,12,9,3,0,13,10,2,1,4],[5,2,12,7,10,11,6,4,13,1,8,3,0,9],[13,6,11,8,7,12,10,9,2,0,4,3,5,1],[5,1,11,13,9,7,3,8,12,4,0,10,6,2],[1,7,2,5,10,6,11,8,9,0,3,4,13,12]]");
let friends = JSON.parse("[[1,4,27,3,28,2,23,7,11,22,9,25,5,8,13,10,24,12,6,19],[0,2,4,3,5,8,15,7,6,12,9,27,11,17,28,16],[3,1,5,0,23,4,9,6,10,11,25,8,7,18,21],[2,5,0,28,1,6,25,4,8,9,7,10,16,14,24,26,15],[5,0,27,1,10,2,3,7,6,9,15,25,20,13,8,11,24],[4,3,2,6,27,1,7,10,0,13,11,21,9,23,14,8,28],[7,11,9,5,27,3,25,10,2,4,1,20,13,8,0,26],[6,8,13,9,0,5,4,1,3,22,2,24,10,12,23],[9,7,10,25,11,16,1,3,12,0,2,15,6,4,5,28],[8,10,28,6,7,11,2,0,25,3,4,19,1,27,5,23,12,20],[11,9,28,8,25,4,12,6,5,2,18,3,0,24,21,7,17],[10,6,14,27,8,9,0,22,18,19,2,25,5,17,1,13,4,24],[14,17,15,18,10,21,22,8,26,1,25,28,0,9,7,23],[16,14,7,19,24,28,26,27,5,0,6,4,11,18],[12,13,11,27,20,15,17,19,25,21,16,28,3,5,22],[18,16,12,19,14,23,1,28,20,4,25,8,17,22,27,3],[13,15,17,22,8,19,27,23,24,14,28,3,25,20,1],[19,27,12,16,25,26,22,14,24,21,23,18,11,15,1,28,10],[15,19,20,12,23,27,26,11,24,10,17,22,2,13],[17,27,18,21,15,13,16,14,11,22,9,23,20,25,0],[24,25,18,14,28,23,22,26,15,6,4,19,16,9],[22,23,19,24,26,12,28,17,14,27,5,10,2,25],[21,24,23,16,17,0,11,12,20,26,19,7,18,28,15,27,14],[25,21,22,0,2,18,27,15,20,16,17,24,19,5,9,7,12],[20,22,21,13,28,17,18,16,23,0,10,7,3,26,4,11],[23,20,8,10,17,26,3,6,27,0,9,14,2,11,4,15,12,28,16,19,21],[28,17,25,21,18,13,20,22,12,27,3,24,6],[17,19,0,4,11,14,5,6,18,23,25,16,13,28,21,1,9,26,15,22],[26,9,10,0,3,20,13,24,21,15,27,14,16,12,25,22,1,17,5,8]]");

for (let i = 0; i < TEAMS; i++) {
  // check if the team was matched with each other team max once
  findDuplicates(friends[i]).forEach(v => console.log(`Team ${i + 1} was with team ${v + 1} multiple times!`))
  
  // check if each team is at each station once
  findDuplicates(teams[i]).forEach(v => console.log(`Team ${i + 1} visited station ${v + 1} multiple times!`))
}

// check if each team is not on multiple stations during the same round
for (let i = 0; i < ROUNDS; i++) {
  let round = stations.map(x => x[i]);
  findDuplicates(_.flatten(round)).forEach(v => console.log(`Team ${v + 1} visited stations on round ${i + 1} multiple times!`))
}

function findDuplicates(array) {
  return _.transform(_.countBy(array), (result, count, value) => {
    if (count > 1) result.push(Number(value));
  }, []);
}

console.log('DONE!');